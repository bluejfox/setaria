/**
 * Setaria v0.3.3
 * (c) 2018 Ray Han
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("axios"),require("vuex"),require("vue"),require("ramda"),require("vue-router")):"function"==typeof define&&define.amd?define(["exports","axios","vuex","vue","ramda","vue-router"],t):t(e.Setaria=e.Setaria||{},e.axios,e.Vuex,e.Vue,e.R,e.VueRouter)}(this,function(e,t,n,r,o,i){"use strict";function a(e,t){return o.merge(e,t)}function s(e,t,n){return o.pathOr(e,t,n)}function u(e,t,n){return o.propOr(e,t,n)}function c(e){return"number"==typeof e||null!==e&&void 0!==e&&!o.isEmpty(e)}function _(e){return!c(e)}function f(e){return(F.message||{})[e]}function d(e,t){void 0===e&&(e=""),void 0===t&&(t=[]);var n=f(e),r=null===n||void 0===n?"":n;return _(r)||_(t)||t.forEach(function(e,t){var n="{"+t+"}";if(-1!==r.indexOf(n)){var o="number"==typeof e?e.toString():e;r=r.split(n).join(o)}}),r}function l(e){var t="";switch(e.charAt(e.length-1)){case"E":t="error";break;case"W":t="warning";break;case"I":t="info";break;case"S":t="success";break;default:t="info"}return t}function E(e){var t=null;try{t=e===ee.LOCAL?window.localStorage:window.sessionStorage}catch(e){throw new Se("SYSMSG-NOT-SUPPORT-STORAGE")}if(void 0===t)throw new Se("SYSMSG-NOT-SUPPORT-STORAGE");return t}function p(e,t){E(e).setItem(Oe,JSON.stringify(t))}function S(e){var t=E(e);return null===t.getItem(Oe)&&t.setItem(Oe,JSON.stringify({})),JSON.parse(t.getItem(Oe))}function O(e){return Object.keys(ee).some(function(t){return ee[t]===e})}function m(e,t,n){if(O(e)){var r=S(e);r[t]=n,p(e,r)}}function R(e,t){if(O(e))return S(e)[t]}function v(e,t){if(O(e)){var n=S(e);delete n[t],p(e,n)}}function T(e){p(e,{})}function h(e,t){var n={};return c(e.scope)&&(n[we]=e.scope),c(e.modules)&&Object.keys(e.modules).forEach(function(r){I(n,t,e.modules[r],r)}),n}function I(e,t,n,r){c(n)&&(c(n.scope)&&(e[r]=n.scope),c(n.modules)&&Object.keys(n.modules).forEach(function(o){I(e,t,n.modules[o],r+"/"+o)}))}function g(e){return-1!==e.indexOf(Ue)?e.substring(0,e.lastIndexOf(Ue)):we}function N(e,t){var n=A(t),r=e;return 0===n.length?r:n.every(function(e){var t=r.modules;return void 0!==t&&null!==t&&(void 0!==t[e]&&null!==t[e]&&(r=t[e],!0))})?r:null}function y(e,t){return t===we?e:s(null,t.split(Ue),e)}function A(e){var t=[];return-1!==e.indexOf(Ue)?t=e.split(Ue):e!==we&&(t=[e]),t}function U(e){return function(t){t.subscribe(function(t,n){var r=t.type;if(null!==F.store&&void 0!==F.store&&null!==F.store.modules&&void 0!==F.store.modules){var o=g(r),i=e[o];i!==ee.LOCAL&&i!==ee.SESSION||ye(i,o,y(n,o))}})}}function w(e,t){e.use(n);var r=L(F.store,de);b("",r,"");var o=h(r,F.storeScopeKey);C(r,o),Ie(r,o),Re=new n.Store(r)}function G(){return Re}function C(e,t){e.plugins.push(U(t))}function b(e,t,n){var r=t.actions,o=t.modules;!0===t.namespaced&&(n=n.length>0?n+"/"+e:e),r&&Object.keys(r).forEach(function(e){var t=""+(n.length>0?n+"/":n)+e;"function"==typeof r[e]?r[e]=D(t,r[e]):(!0===r[e].root&&(t=e),"function"==typeof r[e].handler&&(r[e].handler=D(t,r[e].handler)))}),o&&Object.keys(o).forEach(function(e){b(e,o[e],n)})}function D(e,t){return function(n,r){var o=t(n,r);if(o&&o.then)return G().commit("loading/updateActions",{name:e,status:!0}),new Promise(function(t,n){o.then(function(n){t(n),G().commit("loading/updateActions",{name:e,status:!1})}).catch(function(t){n(t),G().commit("loading/updateActions",{name:e,status:!1})})})}}function L(e,t){var n=e||{};return void 0!==n.modules&&null!==n.modules||(n.modules={}),Object.keys(t.modules).forEach(function(e){n.modules[e]=t.modules[e]}),void 0!==n.plugins&&null!==n.plugins||(n.plugins=[]),n.plugins=t.plugins.concat(n.plugins),n}function x(e){var t=G();return t&&!1!==e.showLoading&&t.commit(Z.ADD_LOADING_COUNT),e}function M(e){var t=G();return t&&!1!==e.config.showLoading&&t.commit(Z.SUB_LOADING_COUNT),e}function j(e){var t=document.createEvent("Event");t.initEvent("unhandledrejection",!1,!0);var n={reason:{value:e,writable:!1}};Object.defineProperties(t,n),window.dispatchEvent(t)}function k(e){if(M({config:e.config}),e.response){console.debug("server have response",e);var t="";switch(e.response.status){case 400:t="400";break;case 401:t="401";break;case 403:t="403";break;case 404:t="404";break;default:t=""}var n="SYSMSG-SERVICE-UNKNOWN-ERROR";throw""!==t&&(n="SYSMSG-SERVICE-STATUS-"+t),new ke(n,e)}if(!e.request)throw console.debug("Something happened in setting up the request that triggered an Error",e),0===e.message.indexOf("timeout of ")?new ke("SYSMSG-TIMEOUT",e,[e.config.timeout/1e3]):0===e.message.indexOf("Network Error")?new ke("SYSMSG-SERVICE-NETWORK-ERROR",e):new ke("SYSMSG-SERVICE-UNKNOWN-ERROR",e);return console.debug("The request was made but no response was received",e),Promise.reject(e)}function Y(e,n){ve={defaults:t};var r=F.http||{};if(H(r),Object.keys(r).length>0){var o=V(r);Object.keys(o).forEach(function(e){ve[e]=o[e]})}K(ve)}function P(){return ve}function H(e){var n=e[Ye];void 0!==n&&null!==n&&Object.keys(n).forEach(function(e){t.defaults[e]=n[e]})}function V(e){if(Object.keys(e).some(function(e){return e!==Ye})){var n={};return Object.keys(e).forEach(function(r){var o=e[r];o.showLoading=!0,n[r]=t.create(o),n[r].all=t.all,n[r].spread=t.spread}),n}return{}}function K(e){var t=[[x]],n=[[M,k]];"function"==typeof e?(t.forEach(function(t){var n=e.interceptors.request;n.use.apply(n,t)}),n.forEach(function(t){var n=e.interceptors.response;n.use.apply(n,t)})):Object.keys(e).forEach(function(r){t.forEach(function(t){var n=e[r].interceptors.request;n.use.apply(n,t)}),n.forEach(function(t){var n=e[r].interceptors.response;n.use.apply(n,t)})})}function q(e,t){e.use(i),Te=new i(F.routes)}function $(){return Te}function W(e,t,n){return function(t,n){if(!W.installed||he!==t){W.installed=!0,he=t;var r=function(e){return void 0!==e};t.mixin({beforeCreate:function(){r(this.$options.setaria)?(this._setaria=this.$options.setaria,this.$options.store=e.getStore(),this.$options.router=e.getRouter()):this._setaria=this.$parent&&this.$parent._setaria||this},destroyed:function(){}}),null!==t.prototype.$http&&void 0!==t.prototype.$http||Object.defineProperty(t.prototype,"$http",{get:function(){return e.getHttp()}}),Y(t,n),w(t,n),q(t,n)}}}function J(e){return"object"==typeof e&&e._name&&"ApplicationError"===e._name}function B(e){var t=null,n="",r="";if(J(e))t=new Se(e.id,[],e.noIdMessage);else if(e.message){if(r=e.message,0===r.indexOf("Error: ")?r=r.replace("Error: ",""):0===r.indexOf("Uncaught Error: ")&&(r=r.replace("Uncaught Error: ","")),-1!==r.indexOf(Ee)){var o=r.split(pe);n=o[0].replace(Ee,"").replace("[","").replace("]",""),r=o[1]}t=new Se(n,[],r)}else t="function"==typeof e.toString?new Se(null,null,e.toString()):new Se("MAM004E");return t}function X(e,t){var n={};n.get=function(){return F},Object.defineProperty(e,"config",n),e.getHttp=P,e.getRouter=$,e.getStore=G}t="default"in t?t.default:t,n="default"in n?n.default:n,r="default"in r?r.default:r,i="default"in i?i.default:i;var F={errorHandler:null,message:null,http:null,routes:null,store:null,storeScopeKey:"scope"},z={_GET_IS_LOADING:"_setaria_get_is_loading",_GET_LOADING_COUNT:"_setaria_get_loading_count",_GET_ROUTE_HISTORY:"_setaria_get_route_history",_GET_ROUTE_CURRENT_INDEX:"_setaria_get_route_current_index",_GET_DIRECTION:"_setaria_get_direction"},Q={_SET_DIRECTION:"_setaria_set_direction",_ADD_LOADING_COUNT:"_setaria_add_loading_count",_SUB_LOADING_COUNT:"_setaria_sub_loading_count",_UPDATE_DIRECTION:"_setaria_update_direction",_UPDATE_ROUTE_HISTORY:"_setaria_update_route_history"},Z={SETARIA_STORE_MODULE:"_setaria_common_",GET_IS_LOADING:"_setaria_common_/"+z._GET_IS_LOADING,GET_LOADING_COUNT:"_setaria_common_/"+z._GET_LOADING_COUNT,GET_ROUTE_HISTORY:"_setaria_common_/"+z._GET_ROUTE_HISTORY,GET_ROUTE_CURRENT_INDEX:"_setaria_common_/"+z._GET_ROUTE_CURRENT_INDEX,GET_DIRECTION:"_setaria_common_/"+z._GET_DIRECTION,SET_DIRECTION:"_setaria_common_/"+Q._SET_DIRECTION,ADD_LOADING_COUNT:"_setaria_common_/"+Q._ADD_LOADING_COUNT,SUB_LOADING_COUNT:"_setaria_common_/"+Q._SUB_LOADING_COUNT,UPDATE_DIRECTION:"_setaria_common_/"+Q._UPDATE_DIRECTION,UPDATE_ROUTE_HISTORY:"_setaria_common_/"+Q._UPDATE_ROUTE_HISTORY},ee={LOCAL:"local",SESSION:"session"},te={SUCCESS:"success",WARNING:"warning",INFO:"info",ERROR:"error"},ne={NORMAL_ERROR:0,PROMISE_UNREJECT_ERROR:1,VUE_ERROR:2},re={ERROR_TYPES:ne,MESSAGE_TYPE:te,STORE_KEY:Z,STORAGE_TYPE:ee},oe={_setaria_direction:"",_setaria_loading:0,_setaria_routeHistory:{currentIndex:null,history:[]}},ie={};ie[z._GET_ROUTE_HISTORY]=function(e){return e._setaria_routeHistory},ie[z._GET_ROUTE_CURRENT_INDEX]=function(e){return e._setaria_routeHistory.currentIndex},ie[z._GET_IS_LOADING]=function(e){return 0!==e._setaria_loading},ie[z._GET_LOADING_COUNT]=function(e){return e._setaria_loading},ie[z._GET_DIRECTION]=function(e){return e._setaria_direction};var ae={},se={};se[Q._SET_DIRECTION]=function(e,t){e._setaria_direction=t},se[Q._ADD_LOADING_COUNT]=function(e){e._setaria_loading+=1},se[Q._SUB_LOADING_COUNT]=function(e){var t=e;t._setaria_loading>0&&(t._setaria_loading-=1)},se[Q._UPDATE_DIRECTION]=function(e,t){var n=(t.current,t.next),r=e._setaria_direction,o=e._setaria_routeHistory;if("forward"!==r&&"back"!==r){if(o.history.length>0)if(o.currentIndex===o.history.length-1)r="back";else{0!==o.currentIndex&&o.history[o.currentIndex-1]===n&&(r="back"),""===r&&o.history[o.currentIndex+1]===n&&(r="forward")}else r="forward";"forward"!==r&&"back"!==r&&(r="forward"),e._setaria_direction=r}},se[Q._UPDATE_ROUTE_HISTORY]=function(e,t){var n=t.current,r=t.next,o=e._setaria_direction,i=e._setaria_routeHistory;if("back"===o)0===i.currentIndex?i.currentIndex=null:(i.history[i.currentIndex]=n,i.currentIndex-=1);else if("forward"===o){if(null===i.currentIndex)i.currentIndex=0;else{if(i.currentIndex<i.history.length-1){var a=i.history.splice(0,i.currentIndex+1);i.history=a}i.currentIndex+=1}i.history.push(r)}};var ue,ce={},_e={namespaced:!0,state:oe,getters:ie,actions:ae,mutations:se,modules:ce},fe={namespaced:!0,state:{actions:{}},getters:{global:function(e){return Object.keys(e.actions).some(function(t){return!0===e.actions[t]})}},mutations:{updateActions:function(e,t){var n=t.name,o=t.status;void 0===o&&(o=!1),r.set(e.actions,n,o)}}},de={modules:(ue={loading:fe},ue._setaria_common_=_e,ue),plugins:[]},le=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=[]),void 0===n&&(n=""),this.id=e,this.type=l(e),this.params=t,this.message=d(this.id,this.params),_(this.message)&&!_(n)&&(this.message=n)};le.prototype.getMessage=function(){return this.message},le.prototype.toString=function(){return this.message};var Ee="Setaria Error",pe=":",Se=function(e){function t(t,n,r){void 0===t&&(t=""),void 0===n&&(n=[]),void 0===r&&(r="");var o=r;_(t)&&(t="unknown"),_(r)&&(o=new le(t,n,r).getMessage());var i=Ee+"["+t+"]"+pe+o;e.call(this,i),this._name="ApplicationError",this.id=t,this.params=n,this.type=te.ERROR,this.noIdMessage=o,this.message=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),Oe="__Setaria_Storage_",me=function(){};me.setItem=function(e,t,n){m(e,t,n)},me.getItem=function(e,t){return R(e,t)},me.setLocalItem=function(e,t){m(ee.LOCAL,e,t)},me.getLocalItem=function(e){return R(ee.LOCAL,e)},me.removeLocalItem=function(e){v(ee.LOCAL,e)},me.clearLocal=function(){T(ee.LOCAL)},me.setSessionItem=function(e,t){m(ee.SESSION,e,t)},me.getSessionItem=function(e){return R(ee.SESSION,e)},me.removeSessionItem=function(e){v(ee.SESSION,e)},me.clearSession=function(){T(ee.SESSION)};var Re,ve,Te,he,Ie=function(e,t){Object.keys(t).forEach(function(n){var r=t[n],o=null;o=n===we?e:N(e,n),o.state=ge(o.state,n,r)})},ge=function(e,t,n){var r={},o=Ae(n,t);return _(o)?e:(Object.keys(e).forEach(function(t){r[t]=u(e[t],t,o)}),r)},Ne=function(e){var t=me.getItem(e,"__setaria_store_sync");return void 0!==t&&null!==t||(t={},me.setItem(e,"__setaria_store_sync",t)),t},ye=function(e,t,n){var r=Ne(e);r[t]=n,me.setItem(e,"__setaria_store_sync",r)},Ae=function(e,t){return Ne(e)[t]},Ue="/",we="_root",Ge=n.createNamespacedHelpers,Ce=n.mapActions,be=n.mapGetters,De=n.mapMutations,Le=n.mapState,xe={createNamespacedHelpers:Ge,mapActions:Ce,mapGetters:be,mapMutations:De,mapState:Le},Me="undefined"!=typeof window,je=function(){var e=window.navigator.userAgent.toLowerCase();return"undefined"!=typeof window&&e&&/firefox\/\d+/.test(e)},ke=function(e){function t(t,n,r,o){void 0===t&&(t=""),void 0===n&&(n={}),void 0===r&&(r=[]),void 0===o&&(o=""),e.call(this,t,r,o),this._name="ServiceError",this.type="ServiceError",this.detail=n,je()&&!1!==s(!0,["config","isShowError"],n)&&j(this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Se),Ye="defaults",Pe=function(){};Pe.init=function(){r.config.errorHandler=function(e,t,n){console.debug("The Exception from Vue"),Pe.handleError(ne.VUE_ERROR,e,{vm:t,info:n})},window.onerror=function(e){console.debug("The Exception from window.onerror"),Pe.handleError(ne.NORMAL_ERROR,e,{})};var e=function(e){console.debug("The Exception from promise"),Pe.handleError(ne.PROMISE_UNREJECT_ERROR,e,{})};void 0!==window.unhandledrejectionHandler&&null!==window.unhandledrejectionHandler||(window.onunhandledrejection=e),window.addEventListener("unhandledrejection",e)},Pe.handleError=function(e,t,n){var r=this.parseError(e,t,n);"function"==typeof F.errorHanlder&&F.errorHanlder(r,e,t,n)},Pe.parseError=function(e,t,n){var r=null;return e===ne.VUE_ERROR?r=B(t):e===ne.NORMAL_ERROR?("string"==typeof t&&(t={message:t}),r=B(t)):r=e===ne.PROMISE_UNREJECT_ERROR?B(t.reason):new Se("MAM004E"),e===ne.VUE_ERROR&&console.error(t),r};var He={"SYSMSG-SERVICE-UNKNOWN-ERROR":"\u8c03\u7528\u8fdc\u7a0b\u670d\u52a1\u7684\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u672a\u77e5\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u6216\u8054\u7cfb\u7ba1\u7406\u5458\u3002","SYSMSG-TIMEOUT":"\u670d\u52a1\u672a\u5728\u9884\u5b9a\u65f6\u95f4\uff08{0}\u79d2\uff09\u5185\u8fd4\u56de\u7ed3\u679c\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u6216\u7a0d\u540e\u91cd\u8bd5\u3002","SYSMSG-CLIENT-UNKNOWN-ERROR":"\u5ba2\u6237\u7aef\u51fa\u73b0\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u6216\u8054\u7cfb\u7ba1\u7406\u5458\u3002","SYSMSG-SERVICE-NETWORK-ERROR":"\u8fdc\u7a0b\u670d\u52a1\u5668\u65e0\u6cd5\u8fde\u63a5\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u6216\u7a0d\u540e\u91cd\u8bd5\u3002","SYSMSG-NOT-SUPPORT-STORAGE":"\u5f53\u524d\u6d4f\u89c8\u5668\u8bbe\u7f6e\u4e0d\u5141\u8bb8\u8bbf\u95ee\u672c\u5730\u5b58\u50a8\u7a7a\u95f4\u3002","SYSMSG-SERVICE-STATUS-400":"\u65e0\u6548\u7684\u8bf7\u6c42\u3002","SYSMSG-SERVICE-STATUS-401":"\u5f53\u524d\u8bf7\u6c42\u9700\u8981\u7528\u6237\u9a8c\u8bc1\u3002","SYSMSG-SERVICE-STATUS-403":"\u8fdc\u7a0b\u670d\u52a1\u62d2\u7edd\u6267\u884c\u3002","SYSMSG-SERVICE-STATUS-404":"\u8bf7\u6c42\u6240\u5e0c\u671b\u5f97\u5230\u7684\u8d44\u6e90\u672a\u88ab\u5728\u670d\u52a1\u5668\u4e0a\u53d1\u73b0\u3002"},Ve=function e(t){void 0===t&&(t={});var n=this;this.initConfig(t),X(e,n),Pe.init()};Ve.prototype.initConfig=function(e){var t=e.message;void 0===t&&(t={});var n=e.http;void 0===n&&(n={});var r=e.routes;void 0===r&&(r={});var o=e.store;void 0===o&&(o={});var i=e.storeScopeKey;F.message=a(He,t),F.http=n||{},F.routes=r||{},F.store=o||{},c(i)&&(F.storeScopeKey=i)},Ve.install=W(Ve),Ve.version="0.3.3",Me&&window.Vue&&window.Vue.use(Ve),e.default=Ve,e.ApplicationError=Se,e.constants=re,e.Message=le,e.ServiceError=ke,e.StoreGlobalAPI=xe,Object.defineProperty(e,"__esModule",{value:!0})});