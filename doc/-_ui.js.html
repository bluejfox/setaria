<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>_ui.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="HTTPContext.html">HTTPContext</a></li><li><a href="Message.html">Message</a><ul class='methods'><li data-type='method'><a href="Message.html#toString">toString</a></li></ul></li><li><a href="SystemMessage.html">SystemMessage</a><ul class='methods'><li data-type='method'><a href="SystemMessage.html#toString">toString</a></li></ul></li><li><a href="ValidationMessage.html">ValidationMessage</a><ul class='methods'><li data-type='method'><a href="ValidationMessage.html#toString">toString</a></li></ul></li><li><a href="ViewModelController.html">ViewModelController</a><ul class='methods'><li data-type='method'><a href="ViewModelController.html#backTo">backTo</a></li><li data-type='method'><a href="ViewModelController.html#forwardTo">forwardTo</a></li><li data-type='method'><a href="ViewModelController.html#getTemplatePath">getTemplatePath</a></li><li data-type='method'><a href="ViewModelController.html#getViewConfigByPath">getViewConfigByPath</a></li><li data-type='method'><a href="ViewModelController.html#getViewModelConfig">getViewModelConfig</a></li><li data-type='method'><a href="ViewModelController.html#getViewPathFromHash">getViewPathFromHash</a></li><li data-type='method'><a href="ViewModelController.html#loadScript">loadScript</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="-_action.html">_action</a><ul class='methods'><li data-type='method'><a href="-_action.html#doAction">doAction</a></li></ul></li><li><a href="-_config.html">_config</a><ul class='methods'><li data-type='method'><a href="-_config.html#createCacheToken">createCacheToken</a></li><li data-type='method'><a href="-_config.html#getMobileOperatingSystem">getMobileOperatingSystem</a></li></ul></li><li><a href="-_cookie.html">_cookie</a><ul class='methods'><li data-type='method'><a href="-_cookie.html#getItem">getItem</a></li><li data-type='method'><a href="-_cookie.html#hasItem">hasItem</a></li><li data-type='method'><a href="-_cookie.html#removeItem">removeItem</a></li><li data-type='method'><a href="-_cookie.html#setItem">setItem</a></li></ul></li><li><a href="-_globalParam.html">_globalParam</a><ul class='methods'><li data-type='method'><a href="-_globalParam.html#clear">clear</a></li><li data-type='method'><a href="-_globalParam.html#get">get</a></li><li data-type='method'><a href="-_globalParam.html#set">set</a></li></ul></li><li><a href="-_handler.html">_handler</a><ul class='methods'><li data-type='method'><a href="-_handler.html#doCatch">doCatch</a></li><li data-type='method'><a href="-_handler.html#doFinally">doFinally</a></li><li data-type='method'><a href="-_handler.html#doPreProcess">doPreProcess</a></li></ul></li><li><a href="-_html.html">_html</a><ul class='methods'><li data-type='method'><a href="-_html.html#bindEventById">bindEventById</a></li><li data-type='method'><a href="-_html.html#bindEventByName">bindEventByName</a></li><li data-type='method'><a href="-_html.html#byId">byId</a></li><li data-type='method'><a href="-_html.html#disable">disable</a></li><li data-type='method'><a href="-_html.html#enable">enable</a></li><li data-type='method'><a href="-_html.html#getFormItemValueByName">getFormItemValueByName</a></li><li data-type='method'><a href="-_html.html#getValue">getValue</a></li><li data-type='method'><a href="-_html.html#hide">hide</a></li><li data-type='method'><a href="-_html.html#removeDomNode">removeDomNode</a></li><li data-type='method'><a href="-_html.html#removeDomNodeById">removeDomNodeById</a></li><li data-type='method'><a href="-_html.html#setFormItemValueByName">setFormItemValueByName</a></li><li data-type='method'><a href="-_html.html#setValue">setValue</a></li><li data-type='method'><a href="-_html.html#show">show</a></li><li data-type='method'><a href="-_html.html#unBindEventById">unBindEventById</a></li><li data-type='method'><a href="-_html.html#validate">validate</a></li></ul></li><li><a href="-_http.html">_http</a><ul class='methods'><li data-type='method'><a href="-_http.html#doAsync">doAsync</a></li><li data-type='method'><a href="-_http.html#doSync">doSync</a></li></ul></li><li><a href="-_log.html">_log</a><ul class='methods'><li data-type='method'><a href="-_log.html#debug">debug</a></li><li data-type='method'><a href="-_log.html#error">error</a></li></ul></li><li><a href="-_message.html">_message</a><ul class='methods'><li data-type='method'><a href="-_message.html#getMessage">getMessage</a></li><li data-type='method'><a href="-_message.html#getSystemMessage">getSystemMessage</a></li></ul></li><li><a href="-_ui.html">_ui</a><ul class='methods'><li data-type='method'><a href="-_ui.html#backTo">backTo</a></li><li data-type='method'><a href="-_ui.html#forwardTo">forwardTo</a></li><li data-type='method'><a href="-_ui.html#showDialog">showDialog</a></li><li data-type='method'><a href="-_ui.html#showMessage">showMessage</a></li><li data-type='method'><a href="-_ui.html#showModalDialog">showModalDialog</a></li><li data-type='method'><a href="-_ui.html#toggleProcessing">toggleProcessing</a></li><li data-type='method'><a href="-_ui.html#updateDocumentTitle">updateDocumentTitle</a></li><li data-type='method'><a href="-_ui.html#updateHTML">updateHTML</a></li></ul></li><li><a href="-_url.html">_url</a><ul class='methods'><li data-type='method'><a href="-_url.html#clearHash">clearHash</a></li><li data-type='method'><a href="-_url.html#clearUrlParameter">clearUrlParameter</a></li><li data-type='method'><a href="-_url.html#getHashParams">getHashParams</a></li><li data-type='method'><a href="-_url.html#getUrlParameter">getUrlParameter</a></li><li data-type='method'><a href="-_url.html#redirectTo">redirectTo</a></li><li data-type='method'><a href="-_url.html#redirectToErrorPage">redirectToErrorPage</a></li><li data-type='method'><a href="-_url.html#setUrlParameter">setUrlParameter</a></li></ul></li><li><a href="-_util.html">_util</a><ul class='methods'><li data-type='method'><a href="-_util.html#dateFormat">dateFormat</a></li><li data-type='method'><a href="-_util.html#escape">escape</a></li><li data-type='method'><a href="-_util.html#get">get</a></li><li data-type='method'><a href="-_util.html#getFileContent">getFileContent</a></li><li data-type='method'><a href="-_util.html#has">has</a></li><li data-type='method'><a href="-_util.html#isArguments">isArguments</a></li><li data-type='method'><a href="-_util.html#isArray">isArray</a></li><li data-type='method'><a href="-_util.html#isBoolean">isBoolean</a></li><li data-type='method'><a href="-_util.html#isEmpty">isEmpty</a></li><li data-type='method'><a href="-_util.html#isFunction">isFunction</a></li><li data-type='method'><a href="-_util.html#isNumber">isNumber</a></li><li data-type='method'><a href="-_util.html#isObject">isObject</a></li><li data-type='method'><a href="-_util.html#isString">isString</a></li><li data-type='method'><a href="-_util.html#keys">keys</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#_setaria">_setaria</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">_ui.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * 复杂UI功能模块
 *
 * @namespace _ui
 * @version 1.0
 * @author HanL
 */
var _ui = new function(){
    "use strict";

    /**
     * HTML换行Tag
     *
     * @private
     * @const
     * @type {string}
     */
    var HTML_TAG_BREAK = "&lt;br\>";

    /**
     * 当前mask的状态
     *
     * @private
     * @type {boolean}
     */
    var _processingStatus = false;

    /**
     * 根据DOM节点ID取得对应的JQuery的DOM对象
     *
     * @private
     * @param  {string} id DOM ID
     * @return {Object} JQuery的DOM对象
     */
    function _byId(id){
        id = id.indexOf("#") === 0 ? id : "#" + id;
        return $(id);
    }

    /**
     * 显示模式化确认窗口
     *
     * @public
     * @param  {Object} param 模式化窗口设置参数
     */
    this.showDialog = function(param){
        alert("Dialog -> title :: " + param.title + ", message :: " + param.message);
    };

    /**
     * 切换mask的显示／隐藏
     *
     * @public
     * @param {Boolean} isDisp 是否显示标志位
     */
    this.toggleProcessing = function(isDisp){
        var loadingNode = $("#" + _config.LOADING_ID);
        if (isDisp){
            loadingNode.show();
        }else{
            loadingNode.hide();
        }
    };

    /**
     * 在画面中显示指定的消息
     *
     * @public
     * @param  {(Array | Message | string)} messageObject 指定的消息
     * @param  {string}                     type          消息类型, info[正常] || error[错误]
     * @param  {Function}                   handler       关闭按钮点击时的回调函数
     */
    this.showMessage = function(messageObject, type, handler){
        var messageArr = [];
        var messageId = "";
        var messageContent = "";
        var doneCallback = null;
        if (!_util.isEmpty(messageObject)){
            // 指定的消息是数组的场合
            if (_util.isArray(messageObject)){
                $.each(messageObject, function(index, item){
                    // messageId = item.messageId || item.id || "";
                    messageArr.push(!!item.message ? item.message : item);
                    messageArr.push(HTML_TAG_BREAK);
                });
            // 指定的消息是对象的场合
            }else if (_util.isObject(messageObject)){
                messageId = messageObject.messageId || "";
                messageArr.push(_util.isObject(messageObject) ? messageObject.message : messageObject);
            // 其他类型的场合，转换为字符串
            }else{
                messageArr.push(messageObject + "");
            }
            if (_util.isFunction(handler)){
                doneCallback = function(){
                    handler();
                };
            }
            // 在画面显示消息
            this.showDialog({
                "title": type !== "error" ? "消息" : "错误",
                "type": type,
                "message": messageArr.join("&lt;br/>"),
                "doneText": "关闭",
                "doneCallback": doneCallback,
                "doneOnly": true
            });
        }
    };

    /**
     * 显示模态窗口
     *
     * @public
     * @param  {string}   title      窗口的标题
     * @param  {string}   message    窗口的内容
     * @param  {Function} handler    确认和取消按钮点击后的回调函数
     * @param  {string}   cancelText 取消按钮的显示文字，默认为［取消］
     * @param  {string}   doneText   确认按钮的显示文字，默认为［确认］
     */
    this.showModalDialog = function(title, message, handler, cancelText, doneText){
        title = _util.isEmpty(title) ? "确认窗口" : title;
        doneOnly = _util.isEmpty(doneText) &amp;&amp; !_util.isEmpty(cancelText);
        doneText = doneText || "确认";
        cancelText = cancelText || "取消";
        // 确认按钮点击后的回调函数
        var doneCallback = function(){
            handler(true);
        };
        // 取消按钮点击后的回调函数
        var cancelCallback = function(){
            handler(false);
        };
        // 显示模态窗口
        this.showDialog({
            "title": title,
            "message": message,
            "doneText": doneText,
            "cancelText": cancelText,
            "doneCallback": doneCallback,
            "cancelCallback": cancelCallback,
            "doneOnly": doneOnly
        });
    };

    /**
     * 跳转到指定画面
     *
     * @public
     * @param  {string} pageId 跳转画面ID
     */
    this.forwardTo = function(pageId){
        _viewModelController.forwardTo.apply(_viewModelController, arguments);
    };

    /**
     * 返回至指定画面
     *
     * @public
     * @param  {string} pageId 跳转画面ID
     */
    this.backTo = function(pageId){
        _viewModelController.backTo.apply(_viewModelController, arguments);
    };

    /**
     * 取得业务画面的HTML，并在指定区域更新
     *
     * @public
     * @param  {string} viewModelTemplateUrl 模版的路径
     * @param  {Object} handler              页面加载完成的回调函数
     */
    this.updateHTML = function(viewModelTemplateUrl, handler){
        // 对应画面的HTML文件
        var viewModelTemplateHTML = null;

        // 取得HTML文件中的内容
        if (!_util.isEmpty(viewModelTemplateUrl)){
            viewModelTemplateHTML = _util.getFileContent(viewModelTemplateUrl, "html");
            // 无法加载指定Html文件的场合
            if (_util.isObject(viewModelTemplateHTML)){
                if (viewModelTemplateHTML.textStatus === "error"){
                    _ui.showMessage(new SystemMessage("SESYSM001E"), "error");
                }
            }else{
                // 在指定区域刷新取得的HTML文本
                $("#" + _config.MAIN_AREA_ID).html(viewModelTemplateHTML);
            }
        }
        // 调用回调函数
        handler();
    };

    /**
     * 更新画面标题
     *
     * @public
     * @param  {string} title 标题内容
     */
    this.updateDocumentTitle = function(title){
        title = _util.isEmpty(title) ? "" : title;
        if (!_util.isEmpty(title)){
            document.title = title;
        }
    };
};
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Thu Sep 08 2016 17:29:54 GMT+0800 (CST) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
