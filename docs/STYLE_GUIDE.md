# 前端开发规约
> 版本1.0

## 目录

## 引言

软件的长期价值直接源于其编码质量，清晰易理解的代码是编码质量的重要一环，代码应该写成可供他人容易阅读的。

## 编写目的

本文档旨在为前端开发提供基本规范，保持页面规范，避免版本管理（git/svn）中开发人员因代码风格不同而产生的非功能性的冲突，提高前端开发人员协作开发的水平。同时减少页面错误、提高系统健壮性。

## 使用环境及对象

本规范适用于基于Vue的前端页面。

适用对象包括：

* UI设计人员
* 开发编码人员

## 编码

JS文件的“换行符类型”为“UNIX/Linux换行符-LF”；编码为 `UTF-8`。

## Javascript编码规范

书写JavaScript代码时需遵循Airbnb公司的JavaScript编码规范，参考链接： [英文版](https://github.com/airbnb/javascript) | [中文版](https://github.com/BingKui/javascript-zh)

## JS风格一览表

| 结构 | 规则 | 备注 |
| :------------- |:-------------| :-----|
| 目录名 | 短横线命名并全部为小写字母 |  |
| 文件名 | 短横线命名并全部为小写字母 |  |
| 类(Class) | 首字母大写驼峰 |  |
| 函数 | 首字母小写驼峰 |  |
| 变量 | 首字母小写驼峰 ||
| 常量 | 首字母大写驼峰(包含`_`) ||
| 路由 | `path` 使用小写字母单词之间使用 `-` 连接，`name` 使用首字母小写驼峰 | { '`path`': 'purchase-query', '`name`': 'purchaseQuery' } |

## Vue编码规范

Vue文件的编码需遵循 [Vue官方风格指南](https://cn.vuejs.org/v2/style-guide/index.html)

## 框架规范

### 所有代码

1. **(Must)** 业务相关的常数需使用由大写字母和_组成的常量进行定义和引用

### Vue文件

1. **(Must)** 事件函数名需要使用 `on` 前缀
2. **(Must)** 控制组件显示/不显示，可用/不可用的变量逻辑必须定义在vue文件的 `computed` 属性中
3. **(Must)** 控制组件显示/不显示的变量后缀名使用 `visible`，可用/不可用的变量后缀名使用 `disabled`
4. **(Must)** 不允许在vue的函数内调用其他事件处理函数
5. **(Must)** 不允许直接修改计算属性中返回的一个属于 module 的对象，对于对象内项目值的变更，需要通过提交 `mutation` 进行修改。
6. **(Must)** 为保证系统的灵活性，同模块内页面跳转时必须使用 `name` 属性定位目标页面路由，不允许使用 `path`。

### Service文件

* **(Must)** 为了减少因后端服务接口变化带来的影响，在service文件内需要对后端服务的输入参数和返回值进行变换处理

## 兼容性

前端页面需支持的浏览器为IE10+和其他现代浏览器。为了减少因兼容性导致的bug和性能，不允许使用ES7+语法。
具体可使用的
ES5语法可参考 [ES5兼容性表格](https://kangax.github.io/es5-compat-table/)。
ES6语法可参考 [ES6兼容性表格](https://kangax.github.io/es6-compat-table/)。

建议使用的工具函数库：

* 数据处理函数库 [numeral](http://numeraljs.com/)
* 日期处理函数库 [moment](https://momentjs.com/docs/)

ES5的严格模式下，以下情况下会显式的报错，所以要避免以下写法。

* 对未定义的变量赋值
* 操作被设置为不可写，不可配置或不可扩充的属性
* 删除变量，函数，参数
* 在对象直接量里重复定义属性
* `eval`做关键字，在eval的字符串里定义变量
* 覆写`arguments`
* 使用`arguments.caller`和 `arguments.callee`（匿名函数必须具名才能引用自己）
* `(function(){` … `}).call( null );` // Exception
* 使用`with`

## 特别注意

* 禁止扩展原生对象的原型，特别是`Object.prototype`。
* 不要在if的条件部分使用赋值表达式，如果确实想要在if条件部分赋值，那么把它括在另一对括号中，如：`if ((a = b)) {` ... `}`
* `parseInt`的第一个参数的第一个字符是`0`时，该字符串将被基于八进制而不是十进制求值。所以使用`parseInt`方法时，建议总是提供第二个参数来指明基于十进制求值。
* 因为javascript遵循二进制浮点数算术标准，所以不能正确地处理十进制的小数，因此在js中 `0.1+0.2` 不等于 `0.3`。但js中的整数运算是精确的，所以在需要精确浮点运算的时候，建议可以先乘以10的阶乘，使用整数部分运算，运算完后再除以10的阶乘。

## 其他建议

* 使用`{}`代替 `new Object()`，使用`[]` 代替 `new Array()`；
* 某些情况下使用`||`或`&&`代替`if`，如 `evt = evt || window.event`；
* 不允许在`if`和`while`语句的条件部分赋值。如 `if(evt=window.event){}`